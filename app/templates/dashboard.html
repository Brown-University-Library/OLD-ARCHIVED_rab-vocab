<!DOCTYPE html>
<html>
<head>
	<title>R@B Vocabulary Management</title>
	<meta charset="utf-8">
	<meta http-equiv="content-type" content="text/html; charset=utf-8" />
	<link rel="stylesheet" href="{{ url_for('static', filename='lib/jquery-ui-1.12.1/jquery-ui.min.css') }}">
	<script src="{{ url_for('static', filename='lib/jquery/jquery-3.1.1.min.js') }}"></script>
	<!--<script src="lib/bootstrap-3.3.7-dist/js/bootstrap.min.js"></script>-->
	<script src="{{ url_for('static', filename='lib/jquery-ui-1.12.1/jquery-ui.min.js') }}"></script>
	<style>
	.count {
		  display: inline-block;
		  min-width: 10px;
		  padding: 3px 7px;
		  font-size: 12px;
		  font-weight: bold;
		  line-height: 1;
		  color: #fff;
		  text-align: center;
		  white-space: nowrap;
		  vertical-align: middle;
		  background-color: #777;
		  border-radius: 10px;
		  margin-left: 5px;
		}
	.count:empty {
	  display: none;
	}

	.sort1 {
		z-index: 1;
	}
	.sort2 {
		z-index: 1;
	}
	</style>
</head>
<body>
	<a href="http://dvivocit1.services.brown.edu/rabvocab/">&lt;&lt; Back</a>
	<div class="top-accordion">
		<h3>Departments</h3>
		<div>
			<div>
				<button class="sort1">Faculty Up</button>
				<button class="sort2">Faculty Down</button>
				<button class="sort3">Terms Up</button>
				<button class="sort4">Terms Down</button>
			</div>
			<table>
				<tbody class="dept-sort-list">
				{% for row in data.depts %}
					<tr data-dept-fac-cnt="{{ row.fac_count }}" data-dept-term-cnt="{{row.term_count }}">
						<td><a href=" {{ row.dept_uri }} ">{{ row.dept_label }}</a></td>
						<td>{{row.fac_count }}</td>
						<td>{{row.term_count }}</td>
					</tr>
				{% endfor %}
				</tbody>
			</table>
		</div>
		<h3>Faculty</h3>
		<div>
			<div>
				<button class="sort5">Terms Up</button>
				<button class="sort6">Terms Down</button>
			</div>
			<table>
				<tbody class="fac-sort-list">
				{% for row in data.faculty %}
					<tr data-fac-term-cnt="{{ row.term_count }}">
						<td><a href=" {{row.fac_uri}} ">{{ row.fac_label }}</a></td>
						<td>{{row.term_count }}</td>
					</tr>
				{% endfor %}
				</tbody>
			</table>
		</div>
		<h3>Terms</h3>
		<div>
			<div>
				<button class="sort7">Faculty Up</button>
				<button class="sort8">Faculty Down</button>
			</div>
			<table>
				<tbody class="term-sort-list">
				{% for row in data.terms %}
					<tr data-term-fac-cnt="{{ row.fac_count }}">
						<td><a href=" {{row.term_uri}} ">{{ row.term_label }}</a></td>
						<td>{{row.fac_count }}</td>
					</tr>
				{% endfor %}
				</tbody>
			</table>
		</div>
	</div>

		<script>
			$(document).ready(function(){
			    $(function(){
			        $(".top-accordion").accordion({
			            header: 'h3',
			            heightStyle: 'content',
			            collapsible: true
			        });
			    });
			 });

			function sortCount(arg, sel, elem, order) {
			    var $selector = $(sel),
			        $element = $selector.children(elem);

			    $element.sort(function(a, b) {
			        var an = parseInt(a.getAttribute(arg)),
			        bn = parseInt(b.getAttribute(arg));

			        if (order == 'asc') {
			            if (an > bn)
			                return 1;
			            if (an < bn)
			                return -1;
			        } else if (order == 'desc') {
			            if (an < bn)
			                return 1;
			            if (an > bn)
			                return -1;
			        }
			        return 0;
			    });

			    $element.detach().appendTo($selector);
			}

			$(document).on('click', '.sort1', function() {
			    sortCount('data-dept-fac-cnt', '.dept-sort-list', 'tr', 'desc');
			});
			$(document).on('click', '.sort2', function() {
			    sortCount('data-dept-fac-cnt', '.dept-sort-list', 'tr', 'asc');
			});
			$(document).on('click', '.sort3', function() {
			    sortCount('data-dept-term-cnt', '.dept-sort-list', 'tr', 'desc');
			});
			$(document).on('click', '.sort4', function() {
			    sortCount('data-dept-term-cnt', '.dept-sort-list', 'tr', 'asc');
			});
			$(document).on('click', '.sort5', function() {
			    sortCount('data-fac-term-cnt', '.fac-sort-list', 'tr', 'desc');
			});
			$(document).on('click', '.sort6', function() {
			    sortCount('data-fac-term-cnt', '.fac-sort-list', 'tr', 'asc');
			});
			$(document).on('click', '.sort7', function() {
			    sortCount('data-term-fac-cnt', '.term-sort-list', 'tr', 'desc');
			});
			$(document).on('click', '.sort8', function() {
			    sortCount('data-term-fac-cnt', '.term-sort-list', 'tr', 'asc');
			});
		</script>
</body>
</html>
